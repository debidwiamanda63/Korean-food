<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ANNYEONG - Jualan Makanan Korea Online</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
  :root {
    --primary: #ff4081;
    --secondary: #2196f3;
    --accent: #ffeb3b;
    --dark: #333;
    --light: #fff;
    --gray: #f5f5f5;
    --success: #4caf50;
  }
  
   {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }
  
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    background: linear-gradient(135deg, #ffe5ec, #e0f7fa);
    color: #333;
    scroll-behavior: smooth;
    line-height: 1.6;
  }
  
  /* Header & Navigation */
  header {
    background: linear-gradient(90deg, #ff80ab, #82b1ff);
    color: white;
    padding: 15px 10px 10px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
    position: sticky;
    top: 0;
    z-index: 1000;
  }
  
  .header-container {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  
  header h1 {
    margin: 0;
    font-size: 1.8em;
    text-align: center;
  }
  
  header p {
    margin: 3px 0 10px;
    font-size: 1em;
    text-align: center;
    font-style: italic;
  }
  
  nav {
    display: flex;
    justify-content: center;
    gap: 15px;
    flex-wrap: wrap;
  }
  
  nav a {
    position: relative;
    color: #fff;
    text-decoration: none;
    font-weight: bold;
    background: rgba(0,0,0,0.2);
    padding: 6px 12px;
    border-radius: 8px;
    transition: 0.2s;
  }
  
  nav a::after {
    content: "";
    position: absolute;
    left: 50%;
    bottom: 2px;
    width: 0;
    height: 3px;
    background: #ffeb3b;
    transition: all 0.3s ease;
    transform: translateX(-50%);
    border-radius: 2px;
  }
  
  nav a.active::after {
    width: 60%;
  }
  
  nav a:hover {
    background: rgba(0,0,0,0.35);
  }
  
  /* Hero Section */
  .hero {
    background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('images/hero.jpg');
    background-size: cover;
    background-position: center;
    height: 70vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    color: white;
    padding: 20px;
  }

  
  .hero h2 {
    font-size: 2.5rem;
    margin-bottom: 1rem;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
  }
  
  .hero p {
    font-size: 1.2rem;
    max-width: 600px;
    margin-bottom: 2rem;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
  }
  
  .hero-btn {
    background: var(--primary);
    color: white;
    padding: 12px 24px;
    border: none;
    border-radius: 30px;
    font-size: 1.1rem;
    font-weight: bold;
    cursor: pointer;
    transition: transform 0.3s, background 0.3s;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  }
  
  .hero-btn:hover {
    transform: translateY(-3px);
    background: #e91e63;
   
  }
  
  /* Category Filter */
  .categories {
    max-width: 1200px;
    margin: 20px auto;
    padding: 0 15px;
  }
  
  .categories h2 {
    text-align: center;
    margin-bottom: 20px;
    color: var(--dark);
  }
  
  .category-filters {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 30px;
  }
  
  .filter-btn {
    background: white;
    border: 2px solid var(--secondary);
    padding: 8px 16px;
    border-radius: 30px;
    cursor: pointer;
    transition: all 0.3s;
    font-weight: 500;
  }
  
  .filter-btn:hover, .filter-btn.active {
    background: var(--secondary);
    color: white;
  }
  .btn-testimoni {
  display: inline-block;
  background: #25D366;
  color: white;
  padding: 12px 24px;
  border-radius: 30px;
  text-decoration: none;
  font-size: 1.1rem;
  font-weight: bold;
  transition: 0.3s;
}

.btn-testimoni:hover {
  background: #128C7E;
}

/*  .discount-badge {
  position: absolute;
  top: 10px;
  left: 10px;
  background: red;
  color: white;
  padding: 5px 10px;
  font-size: 14px;
  font-weight: bold;
  border-radius: 5px;
}
  /* Products */
  main {
    max-width: 1200px;
    margin: auto;
    padding: 20px 15px 80px;
  }
  
  .products {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
  
  }
  
  .product {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    padding: 10px;
    text-align: center;
    display: flex;
    flex-direction: column;
    transition: transform 0.2s ease;
  } 
  
  .product:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 16px rgba(0,0,0,0.15);
  }
  
  .product-badge {
    position: absolute;
    top: 10px;
    right: 10px;
    background: var(--success);
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.8rem;
    font-weight: bold;
  }
  
  .product img {
    width: 100%;
    height: 180px;
    object-fit: cover;
    border-radius: 8px;
    margin-bottom: 10px;
  }
  
  .product h3 {
    margin: 10px 0;
    font-size: 1.2rem;
  }
  
  .product-desc {
    color: #666;
    font-size: 0.9rem;
    margin-bottom: 10px;
    flex-grow: 1;
  }
  
  .product-rating {
    color: #ffc107;
    margin-bottom: 10px;
  }
  
  .product-price {
    color: #d32f2f;
    font-weight: bold;
    font-size: 1.2rem;
    margin: 10px 0;
  }
  
  .product-actions {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 6px;
    margin-top: auto;
  }
  
  .qty-btn {
    padding: 4px 8px;
    border-radius: 6px;
    background: #e53935;
    color: #fff;
    border: none;
    cursor: pointer;
    font-weight: bold;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .qty-btn.plus {
    background: #4caf50;
  }
  
  .qty-input {
    width: 50px;
    text-align: center;
    border-radius: 6px;
    border: 1px solid #aaa;
    padding: 4px;
    height: 30px;
  }

  .add-to-cart {
    padding: 8px 12px;
    margin-top: 8px;
    background: linear-gradient(90deg, #ff4081, #f48fb1);
    color: #fff;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    transition: 0.2s;
    width: 100%;
  }
  
  .add-to-cart:hover {
    opacity: 0.9;
    transform: scale(1.05);
  }
  
  .add-to-cart:disabled {
    background: #ccc;
    cursor: not-allowed;
    transform: none;
  }
  
  /* Cart */
  .cart {
    margin-top: 40px;
    background: #fff;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  }
  
  .cart h2 {
    color: var(--secondary);
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .cart-items {
    list-style: none;
    margin-bottom: 15px;
  }
  
  .cart-items li {
    padding: 8px 0;
    border-bottom: 1px solid #eee;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .remove-btn {
    background: #e53935;
    color: white;
    border: none;
    border-radius: 6px;
    padding: 3px 7px;
    cursor: pointer;
    font-size: 0.9em;
    transition: 0.2s;
  }
  
  .remove-btn:hover {
    background: #c62828;
  }
  
  .cart-summary {
    background: #f9f9f9;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 15px;
  }
  
  .cart-summary p {
    margin: 5px 0;
  }
  
  .total {
    font-weight: bold;
    font-size: 1.2em;
    color: #d32f2f;
    margin-top: 10px;
  }
  
  input, select, textarea {
    padding: 10px;
    margin-top: 5px;
    width: 100%;
    border-radius: 8px;
    border: 1px solid #bbb;
    margin-bottom: 15px;
    font-family: inherit;
  }
  
  label {
    font-weight: 500;
  }
  
  #order-btn {
    width: 100%;
    margin-top: 12px;
    background: linear-gradient(90deg, #4caf50, #81c784);
    font-size: 1.1em;
    padding: 12px;
    border: none;
    border-radius: 8px;
    color: white;
    font-weight: bold;
    cursor: pointer;
    transition: 0.3s;
  }
  
  #order-btn:hover {
    background: linear-gradient(90deg, #43a047, #66bb6a);
    transform: translateY(-2px);
  }
  
  #order-btn:disabled {
    background: #ccc;
    cursor: not-allowed;
    transform: none;
  }
  
  .copy-btn {
    background: var(--secondary);
    border: none;
    border-radius: 6px;
    padding: 8px 12px;
    color: white;
    font-size: 0.9em;
    cursor: pointer;
    transition: 0.2s;
  }
  
  .copy-btn:hover {
    background: #1976d2;
  }
   .menu { padding: 40px 20px; 
     text-align: center;
         } 
  
  .menu h2 { font-size: 2rem;
        margin-bottom: 30px;
           } 
  
  .menu-grid { display: grid;
              grid-template-columns: repeat(2, 1fr);
              gap: 20px; justify-items: center; 
             } 
  .product-card { position: relative; background: #fff; 
                 padding: 15px; 
                 border-radius: 12px; 
                 box-shadow: 0 4px 8px rgba(0,0,0,0.1); 
                 text-align: center; 
                 width: 220px;
                }
  .product-img { width: 100%;
                height: auto; 
                border-radius: 8px;
               }

.discount-badge {
  position: absolute;
  top: 10px;
  left: 10px;
  background: red;
  color: white;
  padding: 5px 10px;
  font-size: 14px;
  font-weight: bold;
  border-radius: 5px;
}

.btn-order {
  margin-top: 10px;
  background: #ff5722;
  color: white;
  padding: 10px 15px;
  border: none;
  border-radius: 30px;
  cursor: pointer;
  transition: 0.3s;
}

.btn-order:hover {
  background: #e64a19;
}

  /* Footer */
  footer {
    background: #333;
    color: #eee;
    text-align: center;
    padding: 30px 10px;
    font-size: 0.9em;
  }
  
  .footer-content {
    max-width: 1200px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 30px;
    text-align: left;
  }
  
  .footer-section h3 {
    color: white;
    margin-bottom: 15px;
    border-bottom: 2px solid var(--secondary);
    padding-bottom: 5px;
    display: inline-block;
  }
  
  .footer-section p {
    margin-bottom: 10px;
  }
  
  .footer-section a {
    color: #82b1ff;
    text-decoration: none;
    transition: 0.3s;
  }
  
  .footer-section a:hover {
    color: #bbdefb;
    text-decoration: underline;
  }
  
  .social-links {
    display: flex;
    gap: 15px;
    margin-top: 15px;
  }
  
  .social-links a {
    display: inline-block;
    width: 40px;
    height: 40px;
    background: rgba(255,255,255,0.1);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: 0.3s;
  }
  
  .social-links a:hover {
    background: var(--secondary);
    transform: translateY(-3px);
  }
  
  .copyright {
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px solid #555;
    grid-column: 1 / -1;
    text-align: center;
  }
  
  /* Visitor Counter */
  .visitor-counter {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: var(--dark);
    color: white;
    padding: 8px 12px;
    border-radius: 20px;
    font-size: 0.9rem;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    z-index: 999;
    display: flex;
    align-items: center;
    gap: 5px;
  }
  
  .testimoni {
  padding: 50px 20px;
  background: #f9f9f9;
  text-align: center;
}

.testimoni h2 {
  font-size: 2rem;
  margin-bottom: 30px;
}

.testimoni-container {
  display: flex;
  justify-content: center;
  gap: 20px;
  flex-wrap: wrap;
}

.testimoni-card {
  background: white;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  max-width: 300px;
}

.testimoni-card p {
  font-style: italic;
  margin-bottom: 10px;
}

  /* Responsive Design */
  @media (max-width: 768px) {
    .hero {
      height: 50vh;
    }
    
    .hero h2 {
      font-size: 2rem;
    }
    
    .hero p {
      font-size: 1rem;
    }
    
    .products {
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    }
    
    .footer-content {
      grid-template-columns: 1fr;
      text-align: center;
    }
    
    .social-links {
      justify-content: center;
    }
    
    .category-filters {
      overflow-x: auto;
      padding-bottom: 10px;
      justify-content: flex-start;
    }
  }
  
  @media (max-width: 480px) {
    nav {
      gap: 8px;
    }
    
    nav a {
      font-size: 0.9rem;
      padding: 4px 8px;
    }
    
    .product {
      padding: 10px;
    }
    
    .product img {
      height: 150px;
    }
    
    .newsletter-form {
      flex-direction: column;
    }
    
    .newsletter-input {
      min-width: auto;
    }
  }

.btn-order {
  display: inline-block;
  background: #ff5722;
  color: white;
  padding: 12px 24px;
  border-radius: 30px;
  text-decoration: none;
  font-size: 1.2rem;
  transition: 0.3s;
}

.btn-order:hover {
  background: #e64a19;
}

</style>
</head>
<body>

<header>
  <div class="header-container">
    <h1>üç± ANNYEONG üç±</h1>
    <p>Delicious Korean Food at Your Doorstep</p>
    <nav>
      <a href="#hero">Home</a>
      <a href="#products">Menu</a>
      <a href="#categories">Kategori</a>
      <a href="#cart">Keranjang</a>
      <a href="#contact">Kontak</a>
    </nav>
  </div>
</header>
  
<!-- Hero Section -->
 
<section class="hero" id="hero">
  <h2>Selamat Datang di ANNYEONG</h2>
  <p>Nikmati kelezatan makanan Korea autentik dengan cita rasa yang menggugah selera</p>
  <button class="hero-btn" onclick="scrollToSection('products')">pesan sekarang</button>
</section>
  
<!--  <section class="menu" id="menu-promo">
  <h2>üî•Menu Promo Spesial jumat berkahüî•</h2>
  <div class="menu-grid">

    <!-- Produk Promo Mango Sticky Rice -->
 <!--   <div class="product-card">
      <div class="discount-badge">20% OFF</div>
      <img src="images/mango2.jpg" alt="Mango Sticky Rice" class="product-img">
      <h3>Mango Sticky Rice</h3>
      <p>
        <del style="color: gray;">Rp15.000</del>
        <span style="color: #e53935; font-weight: bold;">Rp12.000</span>
      </p>

      <!-- Tombol qty -->
 <!--     <div class="product-actions">
        <button class="qty-btn" onclick="decreaseQty(7)">-</button>
        <input type="number" id="qty-7" value="0" min="0" class="qty-input">
        <button class="qty-btn plus" onclick="increaseQty(7)">+</button>
      </div>

      <!-- Tombol Tambah ke Keranjang -->
 <!--     <button class="btn-order" onclick="addToCart(7)">Tambah ke Keranjang</button>
    </div>

  </div>
</section>

</section>
  
<!-- Category Filters -->
<section class="categories" id="categories">
  <h2>Kategori Makanan</h2>
  <div class="category-filters">
    <button class="filter-btn active" data-category="all">Semua Menu</button>
    <button class="filter-btn" data-category="main">Main Course</button>
    <button class="filter-btn" data-category="appetizer">Appetizer</button>
    <button class="filter-btn" data-category="dessert">Dessert</button>
    <button class="filter-btn" data-category="popular">Populer</button>
  </div>
</section>
  
<!-- Products -->
<main>
  <div class="products" id="products"></div>

  <div class="cart" id="cart">
    <h2><i class="fas fa-shopping-cart"></i> Keranjang Belanja</h2>
    <ul id="cart-items" class="cart-items"></ul>
    
    <div class="cart-summary">
      <p>Subtotal: Rp <span id="subtotal-price">0</span></p>
      <p>Ongkir: Rp <span id="delivery-fee">0</span></p>
      <p class="total">Total: Rp <span id="total-price">0</span></p>
    </div>

    <label>Nama Pemesan:</label>
    <input type="text" id="customer-name" placeholder="Masukkan nama lengkap">

    <label>Alamat Pengantar:</label>
    <input type="text" id="address" placeholder="Masukkan alamat lengkap (Diatas 50000 gratis ongkir)">

    <label>Metode Pengantaran:</label>
    <select id="delivery-method" onchange="renderCart()">
      <option value="DELIVERY">Delivery</option>
      <option value="PICKUP">Ambil Sendiri</option>
    </select>

    <label>Metode Pembayaran:</label>
    <select id="payment-method" onchange="showCopyBtn()">
      <option value="CASH">TUNAI</option>
      <option value="SEABANK">SEA Bank 901707287542 a.N debi Dwi amanda</option>
      <option value="DANA">DANA 089525161966 a.N debi Dwi amanda</option>
    </select>

    <div id="copy-container" style="margin-top:8px; display:none;">
      <button class="copy-btn" onclick="copyNumber()"><i class="fas fa-copy"></i> Salin Nomor</button>
    </div>

    <label>Catatan Tambahan:</label>
    <textarea id="notes" placeholder="Contoh: tanpa pedas, extra saus"></textarea>

    <button id="order-btn"><i class="fab fa-whatsapp"></i> Pesan via WhatsApp</button>

    <div style="margin-top:15px; text-align:center;">
      <p>üìç Alamat Toko:</p>
      <a href="https://maps.app.goo.gl/9imqdMpAC4JAK2nZ8" 
         target="_blank" 
         style="display:inline-block; background:#2196f3; color:white; padding:8px 14px; border-radius:8px; text-decoration:none; font-weight:bold;">
        <i class="fas fa-map-marker-alt"></i> Lihat di Google Maps
      </a>
    </div>
  </div>
</main>
  
  <!-- testimoni -->
<section class="testimoni" id="testimoni">
  <h2>Apa Kata Pelanggan Kami ‚ù§Ô∏è</h2>
  <div class="testimoni-container">
    <div class="testimoni-card">
      <p>"Makanannya enak banget! Chicken pop nya bikin nagih üòç"</p>
      <h4>- Sinta</h4>
    </div>
    <div class="testimoni-card">
      <p>"Harga terjangkau, rasa mantap. Favorit saya kimbabnya üëç"</p>
      <h4>- Budi</h4>
    </div>
    <div class="testimoni-card">
      <p>"Pesan online gampang, pengiriman cepat, recommended üëå"</p>
      <h4>- Andi</h4>
    </div>
  </div>
</section>

  <section class="testimoni-form">
  <h2>Tulis Testimoni Kamu üí¨</h2>
  <form id="waForm">
    <input type="text" id="nama" placeholder="Nama Kamu" required><br>
    <textarea id="pesan" placeholder="Tulis testimoni kamu..." required></textarea><br>
    <button type="submit">Kirim via WhatsApp</button>
  </form>
</section>


<!-- Footer -->
<footer id="contact">
  <div class="footer-content">
    <div class="footer-section">
      <h3>Tentang ANNYEONG</h3>
      <p>Menghadirkan cita rasa Korea autentik dengan bahan-bahan pilihan dan racikan yang pas untuk lidah Indonesia.</p>
    </div>
    
    <div class="footer-section">
      <h3>Kontak Kami</h3>
      <p><i class="fas fa-phone"></i> <a href="https://wa.me/6288279631889" target="_blank">088279631889</a></p>
      <p><i class="fab fa-instagram"></i> <a href="#">@debi_dwi06</a></p>
      <p><i class="fas fa-map-marker-alt"></i> <a href="https://maps.app.goo.gl/9imqdMpAC4JAK2nZ8" target="_blank">Lihat Lokasi Toko</a></p>
      
      <div class="social-links">
        <a href="#"><i class="fab fa-facebook-f"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-tiktok"></i></a>
        <a href="#"><i class="fab fa-whatsapp"></i></a>
      </div>
    </div>
    
    <div class="footer-section">
      <h3>Jam Operasional</h3>
      <p>Senin - Jumat: 10:00 - 20:00</p>
      <p>Sabtu - Minggu: 09:00 - 21:00</p>
    </div>
    
    <div class="copyright">
      <p>¬© 2025 ANNYEONG. All rights reserved.</p>
    </div>
  </div>
</footer>

<!-- Visitor Counter -->
 
<div class="visitor-counter">
  <i class="fas fa-users"></i>
  <span id="visitor-count">0</span> Pengunjung
</div>
  <script>
  document.getElementById("waForm").addEventListener("submit", function(e){
    e.preventDefault();
    let nama = document.getElementById("nama").value;
    let pesan = document.getElementById("pesan").value;
    let waURL = "https://wa.me/6289525161966?text=Testimoni dari " + nama + ":%0A" + pesan;
    window.open(waURL, "_blank");
  });
</script>

<script>
// Data produk dengan kategori dan deskripsi

const products = [
  { 
     id: 1, 
    name: "Bento Korean", 
    price: 10000, 
    image: "images/bento.jpg",  
    category: "main",
    description: "Nasi dengan lauk lengkap ala Korea",
    rating: 4.5,
    popular: true
  },
  { 
    id: 2, 
    name: "Kimbab", 
    price: 15000, 
    image: "images/kimbab2.jpg", 
    category: "main",
    description: "Gulungan nasi dengan isian sayuran dan daging",
    rating: 4.8,
    popular: true
  },
  { 
    id: 3, 
    name: "Korean Lava Chicken Wings", 
    price: 10000, 
    image: "images/korean2.jpg", 
    category: "appetizer",
    description: "Sayap ayam pedas dengan saus lava spesial",
    rating: 4.7,
    popular: true
  },
  { 
    id: 4, 
    name: "Korean Lava Chicken Wings + Nasi", 
    price: 7000, 
    image: "images/nasi2.jpg", 
    category: "main",
    description: "Paket lengkap chicken wings dengan nasi",
    rating: 4.6
  },
  { 
    id: 5, 
    name: "Chicken Pop Korean Spicy", 
    price: 15000, 
    image: "images/chicken2.jpg", 
    category: "appetizer",
    description: "Potongan ayam crispy dengan bumbu pedas Korea",
    rating: 4.9,
    popular: true
  },
  { 
    id: 6, 
    name: "Onigiri", 
    price: 5000, 
    image: "images/onigiri2.jpg", 
    category: "main",
    description: "Nasi kepal isi tuna dengan rumput laut",
    rating: 4.4
  },
  { 
    id: 7, 
    name: "Mango Sticky Rice", 
    price: 15000, 
    image: "images/mango2.jpg", 
    category: "dessert",
    description: "Nasi ketan manis dengan mangga segar",
    rating: 4.7

  },
  { 
    id: 8, 
    name: "Fire Cheese Wing", 
    price: 15000, 
    image: "images/fire2.jpg", 
    category: "main",
    description: "Sayap ayam dengan saus pedas dan keju leleh",
    rating: 4.8,
    popular: true
  }
];

let cart = [];
let deliveryFee = 5000;
let visitorCount = Math.floor(Math.random() * 100) + 50; // Random visitor count for demo

const productsDiv = document.getElementById("products");
const cartItems = document.getElementById("cart-items");
const deliveryFeeEl = document.getElementById("delivery-fee");
const totalPriceEl = document.getElementById("total-price");
const subtotalPriceEl = document.getElementById("subtotal-price");
const addressInput = document.getElementById("address");
const paymentSelect = document.getElementById("payment-method");
const orderBtn = document.getElementById("order-btn");
const notesInput = document.getElementById("notes");
const customerNameInput = document.getElementById("customer-name");
const visitorCountEl = document.getElementById("visitor-count");
const filterButtons = document.querySelectorAll('.filter-btn');

// Initialize visitor count
visitorCountEl.textContent = visitorCount;

// Function to scroll to section
function scrollToSection(sectionId) {
  document.getElementById(sectionId).scrollIntoView({ behavior: 'smooth' });
}

// Function to render star ratings
function renderRating(rating) {
  let stars = '';
  const fullStars = Math.floor(rating);
  const hasHalfStar = rating % 1 !== 0;
  
  for (let i = 0; i < fullStars; i++) {
    stars += '<i class="fas fa-star"></i>';
  }
  
  if (hasHalfStar) {
    stars += '<i class="fas fa-star-half-alt"></i>';
  }
  
  const emptyStars = 5 - Math.ceil(rating);
  for (let i = 0; i < emptyStars; i++) {
    stars += '<i class="far fa-star"></i>';
  }
  
  return stars;
}

// Function to filter products by category
function filterProducts(category) {
  if (category === 'all') {
    renderProducts(products);
    return;
  }
  
  const filteredProducts = products.filter(product => {
    if (category === 'popular') return product.popular;
    return product.category === category;
  });
  
  renderProducts(filteredProducts);
}

// Function to render products
function renderProducts(productsToRender = products) {
  productsDiv.innerHTML = '';
  
  productsToRender.forEach(p => {
    const div = document.createElement("div");
    div.className = "product";
    
    if (p.popular) {
      div.innerHTML += `<div class="product-badge">Populer!</div>`;
    }
    
    div.innerHTML += `
      <img src="${p.image}" alt="${p.name}">
      <h3>${p.name}</h3>
      <p class="product-desc">${p.description}</p>
      <div class="product-rating">${renderRating(p.rating)}</div>
      <p class="product-price">Rp ${p.price.toLocaleString()}</p>
      <div class="product-actions">
        <button class="qty-btn" onclick="decreaseQty(${p.id})">-</button>
        <input type="number" id="qty-${p.id}" value="0" min="0" class="qty-input">
        <button class="qty-btn plus" onclick="increaseQty(${p.id})">+</button>
      </div>
      <button class="add-to-cart" onclick="addToCart(${p.id})">Tambah ke Keranjang</button>
    `;
    productsDiv.appendChild(div);
  });
}

function increaseQty(id) {
  const input = document.getElementById(`qty-${id}`);
  input.value = parseInt(input.value) + 1;
}

function decreaseQty(id) {
  const input = document.getElementById(`qty-${id}`);
  let val = parseInt(input.value);
  if(val > 0) input.value = val - 1;
}

function addToCart(id) {
  const qty = parseInt(document.getElementById(`qty-${id}`).value);
  if(qty <= 0) return alert("Masukkan jumlah minimal 1");
  const prod = products.find(p => p.id === id);
  const existing = cart.find(i => i.id === id);
  if(existing) existing.qty += qty;
  else cart.push({ ...prod, qty });
  document.getElementById(`qty-${id}`).value = 0;
  renderCart();
  
}

function removeFromCart(id) {
  cart = cart.filter(item => item.id !== id);
  renderCart();
}

function calculateDelivery(addr, subtotal) {
  const method = document.getElementById("delivery-method").value;
  if(method === "PICKUP") return 0;
  const a = addr.toLowerCase();
  if(a.includes("lima kaum") || a.includes("rambatan")|| a.includes("piliang")|| a.includes("dobok")|| a.includes("pabalutan")|| a.includes("kopas")|| a.includes("cimonai")|| a.includes("garuda mas")|| a.includes("mtsn")) return 0;
  if(subtotal >= 49000) return 0;
  return 5000;
}

function renderCart() {
  cartItems.innerHTML = "";
  let subtotal = 0;
  
  cart.forEach(item => {
    const li = document.createElement("li");
    li.innerHTML = `
      <span>${item.name} x${item.qty} - Rp ${(item.price*item.qty).toLocaleString()}</span>
      <button class="remove-btn" onclick="removeFromCart(${item.id})"><i class="fas fa-trash"></i></button>
    `;
    cartItems.appendChild(li);
    subtotal += item.price * item.qty;
  });

  if (cart.length === 0) {
    cartItems.innerHTML = '<li style="text-align:center; padding:20px;">Keranjang belanja masih kosong</li>';
  }

  subtotalPriceEl.textContent = subtotal.toLocaleString();
  deliveryFee = calculateDelivery(addressInput.value, subtotal);
  deliveryFeeEl.textContent = deliveryFee.toLocaleString();
  const total = subtotal + deliveryFee;
  totalPriceEl.textContent = total.toLocaleString();

  orderBtn.disabled = cart.length === 0 || !customerNameInput.value || !addressInput.value;
}

addressInput.addEventListener("input", renderCart);
customerNameInput.addEventListener("input", renderCart);

function showCopyBtn() {
  const method = paymentSelect.value;
  const copyContainer = document.getElementById("copy-container");
  if(method === "SEABANK" || method === "DANA") {
    copyContainer.style.display = "block";
  } else {
    copyContainer.style.display = "none";
  }
}

function copyNumber() {
  let textToCopy = "";
  if(paymentSelect.value === "SEABANK") textToCopy = "901707287542";
  else if(paymentSelect.value === "DANA") textToCopy = "089525161966";
  navigator.clipboard.writeText(textToCopy).then(()=>{
    alert("Nomor berhasil disalin: " + textToCopy);
  });
}


orderBtn.addEventListener("click", ()=>{
  if(!customerNameInput.value || !addressInput.value) 
    return alert("Nama dan alamat harus diisi!");

  const confirmOrder = confirm("Apakah data pesanan sudah benar?");
  if(!confirmOrder) return;

  const productList = cart.map(i=>`${i.name} x${i.qty} (Rp ${(i.price*i.qty).toLocaleString()})`).join("\n");

  // Tambahan pesan jika transfer
  let transferNote = "";
  if(paymentSelect.value === "SEABANK") {
    transferNote = "\n\nüí≥ Silakan transfer ke SEA Bank 901707287542 a.n Debi Dwi Amanda.\nüì∏ Jangan lupa kirim bukti transfernya ya!";
  } else if(paymentSelect.value === "DANA") {
    transferNote = "\n\nüí≥ Silakan transfer ke DANA 089525161966 a.n Debi Dwi Amanda.\nüì∏ Jangan lupa kirim bukti transfernya ya!";
  }

  const message = `
========== PESANAN ==========
Nama Pemesan: ${customerNameInput.value}
${productList}
-----------------------------
Subtotal: Rp ${subtotalPriceEl.textContent}
Ongkir: Rp ${deliveryFeeEl.textContent}
Total: Rp ${totalPriceEl.textContent}
-----------------------------
Alamat: ${addressInput.value}
Metode Pengantaran: ${document.getElementById("delivery-method").value}
Metode Pembayaran: ${paymentSelect.value}
Catatan: ${notesInput.value}
=============================
${transferNote}
`;

  window.open(`https://wa.me/6288279631889?text=${encodeURIComponent(message)}`, "_blank");
});

// Add event listeners to filter buttons
filterButtons.forEach(button => {
  button.addEventListener('click', () => {
    // Remove active class from all buttons
    filterButtons.forEach(btn => btn.classList.remove('active'));
    // Add active class to clicked button
    button.classList.add('active');
    // Filter products
    filterProducts(button.dataset.category);
  });
});

// Initialize the page
renderProducts();
renderCart();
</script>
</body>
</html>
