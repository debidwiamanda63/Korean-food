<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ANNYEONG - Jualan Makanan Online</title>
<style>
  body { font-family: Arial, sans-serif; padding: 10px; max-width: 600px; margin: auto; }
  h1 { text-align: center; }
  .products {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
  }
  .product {
    border: 1px solid #ccc;
    padding: 5px;
    border-radius: 8px;
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }
  .product img {
    width: 100%;
    height: 150px;
    object-fit: cover;
    border-radius: 5px;
  }
  button { padding: 5px 10px; margin-top: 5px; background: #3498db; color: #fff; border: none; border-radius: 5px; cursor: pointer; }
  button:disabled { background: #ccc; cursor: not-allowed; }
  .cart { margin-top: 20px; border-top: 2px solid #333; padding-top: 10px; }
  input, select, textarea { padding: 5px; margin-top: 5px; width: 100%; border-radius: 5px; border: 1px solid #ccc; }
  .total { font-weight: bold; margin-top: 5px; }
</style>
</head>
<body>

<h1>ANNYEONG</h1>

<div class="products" id="products"></div>

<div class="cart" id="cart">
  <h2>Keranjang</h2>
  <ul id="cart-items"></ul>
  <p>Ongkir: Rp <span id="delivery-fee">0</span></p>
  <p class="total">Total: Rp <span id="total-price">0</span></p>

  <label>Nama Pemesan:</label>
  <input type="text" id="customer-name" placeholder="Masukkan nama lengkap">

  <label>Alamat Pengantar:</label>
  <input type="text" id="address" placeholder="Masukkan alamat lengkap">

  <label>Metode Pembayaran:</label>
  <select id="payment-method">
    <option value="tunai">Tunai</option>
    <option value="transfer">Transfer SEA Bank 901707287542 a.N debi Dwi amanda</option>
  </select>

  <label>Catatan Tambahan:</label>
  <textarea id="notes" placeholder="Contoh: tanpa pedas, extra saus"></textarea>

  <button id="order-btn">Pesan via WhatsApp</button>
</div>

<script>
const products = [
  { id:1, name:"Bento", price:10000, image:"images/bento.jpg" },
  { id:2, name:"Kimbab", price:15000, image:"images/kimbab.jpg" },
  { id:3, name:"Korean Lava Chicken Wings", price:10000, image:"images/korean.jpg" },
  { id:4, name:"Korean Lava Chicken Wings + Nasi", price:7000, image:"images/nasi.jpg" },
  { id:5, name:"Chicken Pop Korean Spicy", price:15000, image:"images/chicken.jpg" },
  { id:6, name:"Onigiri", price:5000, image:"images/onigiri.jpg" },
  { id:7, name:"Mango Sticky Rice", price:15000, image:"images/mango.jpg" },
  { id:8, name:"Fire Cheese Wing", price:15000, image:"images/fire.jpg" },
];

let cart = [];
let deliveryFee = 5000;

const productsDiv = document.getElementById("products");
const cartItems = document.getElementById("cart-items");
const deliveryFeeEl = document.getElementById("delivery-fee");
const totalPriceEl = document.getElementById("total-price");
const addressInput = document.getElementById("address");
const paymentSelect = document.getElementById("payment-method");
const orderBtn = document.getElementById("order-btn");
const notesInput = document.getElementById("notes");
const customerNameInput = document.getElementById("customer-name");

function renderProducts() {
  products.forEach(p => {
    const div = document.createElement("div");
    div.className = "product";
    div.innerHTML = `
      <img src="${p.image}" alt="${p.name}">
      <h3>${p.name}</h3>
      <p>Rp ${p.price.toLocaleString()}</p>
      <input type="number" id="qty-${p.id}" value="0" min="0" style="width:50px;">
      <button onclick="addToCart(${p.id})">Tambah ke Keranjang</button>
    `;
    productsDiv.appendChild(div);
  });
}

function addToCart(id) {
  const qty = parseInt(document.getElementById(`qty-${id}`).value);
  if(qty <= 0) return alert("Masukkan jumlah minimal 1");
  const prod = products.find(p => p.id === id);
  const existing = cart.find(i => i.id === id);
  if(existing) existing.qty += qty;
  else cart.push({ ...prod, qty });
  renderCart();
}

function calculateDelivery(addr) {
  const a = addr.toLowerCase();
  if(a.includes("lima kaum") || a.includes("rambatan")) return 0;
  return 5000;
}

function renderCart() {
  cartItems.innerHTML = "";
  cart.forEach(item => {
    const li = document.createElement("li");
    li.textContent = `${item.name} x${item.qty} - Rp ${(item.price*item.qty).toLocaleString()}`;
    cartItems.appendChild(li);
  });

  deliveryFee = calculateDelivery(addressInput.value);
  deliveryFeeEl.textContent = deliveryFee.toLocaleString();

  const total = cart.reduce((sum,i)=>sum+i.price*i.qty,0) + deliveryFee;
  totalPriceEl.textContent = total.toLocaleString();

  orderBtn.disabled = cart.length === 0 || !customerNameInput.value || !addressInput.value;
}

addressInput.addEventListener("input", renderCart);
customerNameInput.addEventListener("input", renderCart);

orderBtn.addEventListener("click", ()=>{
  if(!customerNameInput.value || !addressInput.value) return alert("Nama dan alamat harus diisi!");
  
  const productList = cart.map(i=>`${i.name} x${i.qty} (${i.price*i.qty})`).join("\n");
  const message = `
========== PESANAN ==========
Nama Pemesan: ${customerNameInput.value}
${productList}
-----------------------------
Alamat: ${addressInput.value}
Metode pembayaran: ${paymentSelect.value}
Catatan: ${notesInput.value}
-----------------------------
Total: Rp ${totalPriceEl.textContent}
=============================
`;
  window.open(`https://wa.me/6288279631889?text=${encodeURIComponent(message)}`, "_blank");
});

renderProducts();
</script>

</body>
</html>
